<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ุฅุฏุงุฑุฉ ุงูุฌูุณุฉ - Joyce Beauty Salon</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/doctorspace/doctorappo.css">
</head>
<body>
  <!-- Loading Overlay -->
  <div id="loadingOverlay" class="loading-overlay">
    <div class="loader"></div>
    <p>ุฌุงุฑู ุงูุชุญููู...</p>
  </div>

  <!-- Header -->
  <header class="site-header">
    <div class="header-inner">
      <button id="backBtn" class="back-btn">
        <span>โ</span>
        ุฑุฌูุน
      </button>
      <h1>๐ ุฅุฏุงุฑุฉ ุงูุฌูุณุฉ</h1>
      <div class="header-actions">
        <button id="saveAllBtn" class="btn-save-all">
          <span>๐พ</span>
          ุญูุธ ุงูุฌูุณุฉ
        </button>
      </div>
    </div>
  </header>

  <main class="container">
    <!-- Two Column Layout -->
    <div class="main-layout">
      <!-- Right Side: Booking Info -->
      <aside class="booking-info-panel">
        <div class="panel-header">
          <h2>๐ ุจูุงูุงุช ุงูุญุฌุฒ</h2>
        </div>
        
        <div class="panel-body" id="bookingInfoContent">
          <div class="info-loading">
            <div class="loader-small"></div>
            <p>ุฌุงุฑู ุงูุชุญููู...</p>
          </div>
        </div>
      </aside>

      <!-- Left Side: Services & Actions -->
      <section class="services-panel">
        <div class="panel-header">
          <h2>โ๏ธ ุฎุฏูุงุช ุงูุฌูุณุฉ</h2>
          <button id="stockBtn" class="btn-stock">
            <span>๐ฆ</span>
            ุงููุฎุฒูู
          </button>
          <button id="addServiceBtn" class="btn-add-service">
  <span>โ</span>
  ุฅุถุงูุฉ ุฎุฏูุฉ
</button>
        </div>
        
        <div class="panel-body">
          <div id="servicesContainer" class="services-container"></div>
        </div>
      </section>
    </div>
  </main>

  <!-- Modal: Stock -->
  <div id="stockModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>๐ฆ ุงุฎุชูุงุฑ ูู ุงููุฎุฒูู</h3>
        <button class="modal-close" id="closeStockModal">&times;</button>
      </div>
      
      <div class="modal-body">
        <div class="form-group">
          <label for="stockSearch">๐ ุจุญุซ ุนู ููุชุฌ</label>
          <input type="text" id="stockSearch" placeholder="ุงุจุญุซ ุจุงูุงุณู ุฃู ุงูุจุงุฑููุฏ...">
        </div>
        
        <div id="stockProductsList" class="products-list"></div>
        
        <div id="selectedStockItem" style="display: none; margin-top: 20px; padding: 16px; background: #f0f9ff; border-radius: 12px;">
          <h4 style="color: #1e40af; margin-bottom: 12px;">ุงูููุชุฌ ุงููุฎุชุงุฑ:</h4>
          <div id="selectedItemInfo"></div>
          
          <div class="form-group" style="margin-top: 16px;">
            <label for="stockQuantity">ุงููููุฉ *</label>
            <input type="number" id="stockQuantity" min="1" value="1">
          </div>
          
          <button id="confirmStockBtn" class="btn btn-success" style="width: 100%; margin-top: 16px;">
            <span>โ</span>
            ุชุฃููุฏ ุงูุงุณุชุฎุฏุงู
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal: Laser Details -->
  <div id="laserModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>๐ซ ุชูุงุตูู ุฌูุณุฉ ุงูููุฒุฑ</h3>
        <button class="modal-close" id="closeLaserModal">&times;</button>
      </div>
      
      <form id="laserForm" class="modal-body">
        <input type="hidden" id="laserServiceId">
        <input type="hidden" id="laserServiceName">
        <input type="hidden" id="laserServiceIndex">
        
        <div class="form-row">
          <div class="form-group">
            <label>๐ค ุงูุงุณู</label>
            <input type="text" id="laserClientName" readonly>
          </div>
          <div class="form-group">
            <label>๐ฑ ุฑูู ุงููุงุชู</label>
            <input type="text" id="laserClientPhone" readonly>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label>๐ ุงูุชุงุฑูุฎ</label>
            <input type="text" id="laserDate" readonly>
          </div>
          <div class="form-group">
            <label>๐ ุงูููุช</label>
            <input type="text" id="laserTime" readonly>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="laserSessionNumber">๐ข ุฑูู ุงูุฌูุณุฉ *</label>
            <input type="number" id="laserSessionNumber" min="1" required>
          </div>
          <div class="form-group">
            <label for="laserSessionType">๐ ููุน ุงูุฌูุณุฉ *</label>
            <input type="text" id="laserSessionType" placeholder="ูุซุงู: ุฅุฒุงูุฉ ุดุนุฑ" required>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="laserPulses">โก ุนุฏุฏ ุงููุจุถุงุช *</label>
            <input type="number" id="laserPulses" min="1" required>
          </div>
          <div class="form-group">
            <label for="laserPower">๐ Power *</label>
            <input type="number" id="laserPower" step="0.1" required>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="laserPulsDuration">โฑ๏ธ Pulse Duration *</label>
            <input type="number" id="laserPulsDuration" step="0.1" required>
          </div>
          <div class="form-group">
            <label for="laserSpotSize">๐ Spot Size *</label>
            <input type="number" id="laserSpotSize" step="0.1" required>
          </div>
        </div>
        
        <div class="form-group">
          <label for="laserSkinType">๐จ Skin Type *</label>
          <select id="laserSkinType" required>
            <option value="">ุงุฎุชุฑ ููุน ุงูุจุดุฑุฉ</option>
            <option value="Type I">Type I - Very Fair</option>
            <option value="Type II">Type II - Fair</option>
            <option value="Type III">Type III - Medium</option>
            <option value="Type IV">Type IV - Olive</option>
            <option value="Type V">Type V - Brown</option>
            <option value="Type VI">Type VI - Dark Brown/Black</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="laserNotes">๐ ููุงุญุธุงุช ุฅุถุงููุฉ</label>
          <textarea id="laserNotes" rows="3" placeholder="ุฃู ููุงุญุธุงุช ุนูู ุงูุฌูุณุฉ..."></textarea>
        </div>
        
        <button type="submit" class="btn btn-success" style="width: 100%;">
          <span>๐พ</span>
          ุญูุธ ุงูุชูุงุตูู
        </button>
      </form>
    </div>
  </div>
  <!-- Modal: Add Extra Service -->
<div id="addServiceModal" class="modal">
  <div class="modal-content" style="max-width: 600px;">
    <div class="modal-header">
      <h3>โ ุฅุถุงูุฉ ุฎุฏูุฉ ุฅุถุงููุฉ</h3>
      <button class="modal-close" id="closeAddServiceModal">&times;</button>
    </div>
    
    <form id="addServiceForm" class="modal-body">
      <!-- ุฑุตูุฏ ุงูุนููู -->
      <div id="clientBalanceInfo" class="client-balance-box"></div>
      
      <!-- ุงููุณู -->
      <div class="form-group">
        <label for="extraServiceCategory">๐๏ธ ุงููุณู *</label>
        <select id="extraServiceCategory" required>
          <option value="">ุงุฎุชุฑ ุงููุณู</option>
        </select>
      </div>
      
      <!-- ุงูุฎุฏูุฉ -->
      <div class="form-group">
        <label for="extraService">โ๏ธ ุงูุฎุฏูุฉ *</label>
        <select id="extraService" required disabled>
          <option value="">ุงุฎุชุฑ ุงููุณู ุฃููุงู</option>
        </select>
      </div>
      
      <!-- ูุนูููุงุช ุงูุฎุฏูุฉ -->
      <div id="serviceInfoBox" style="display: none;" class="service-info-box">
        <div class="service-info-row">
          <strong>ุงููุฏุฉ:</strong>
          <span id="serviceDuration">--</span> ุฏูููุฉ
        </div>
        <div class="service-info-row">
          <strong>ุงูุณุนุฑ:</strong>
          <span id="servicePrice">--</span> ุฌ
        </div>
      </div>
      
      <!-- ููุน ุงูุฑุตูุฏ -->
      <div class="form-group">
        <label for="extraServiceBalanceType">๐ณ ููุน ุงูุฑุตูุฏ *</label>
        <select id="extraServiceBalanceType" required>
          <option value="">ุงุฎุชุฑ ููุน ุงูุฑุตูุฏ</option>
          <option value="ุฑุตูุฏ ุฃุณุงุณู">ุฑุตูุฏ ุฃุณุงุณู</option>
          <option value="ุฑุตูุฏ ููุฒุฑ">ุฑุตูุฏ ููุฒุฑ</option>
          <option value="ุฑุตูุฏ ุจุดุฑุฉ">ุฑุตูุฏ ุจุดุฑุฉ</option>
        </select>
      </div>
      
      <!-- ุชุญุฐูุฑ ุงูุฑุตูุฏ -->
      <div id="balanceWarning" style="display: none;" class="balance-warning">
        โ๏ธ ุงูุฑุตูุฏ ุบูุฑ ูุงูู - ุณูุชู ุฅุฑุณุงู ุชูุจูู ููุงุณุชูุจุงู
      </div>
      
      <button type="submit" class="btn btn-success" style="width: 100%;">
        <span>โ</span>
        ุฅุถุงูุฉ ุงูุฎุฏูุฉ
      </button>
    </form>
  </div>
</div>

  <!-- Modal: Skin Details -->
  <div id="skinModal" class="modal">
    <div class="modal-content" style="max-width: 500px;">
      <div class="modal-header">
        <h3>โจ ุชูุงุตูู ุงูุนูุงูุฉ ุจุงูุจุดุฑุฉ</h3>
        <button class="modal-close" id="closeSkinModal">&times;</button>
      </div>
      
      <form id="skinForm" class="modal-body">
        <input type="hidden" id="skinServiceId">
        <input type="hidden" id="skinServiceName">
        <input type="hidden" id="skinServiceIndex">

        <div class="form-group">
          <label for="skinProductUsed">๐งด ุงูููุชุฌ ุงููุณุชุฎุฏู *</label>
          <input type="text" id="skinProductUsed" placeholder="ุงุณู ุงูููุชุฌ" required>
        </div>
        
        <div class="form-group">
          <label for="skinQuantity">๐ฆ ุงููููุฉ *</label>
          <input type="number" id="skinQuantity" min="1" step="0.1" required>
        </div>
        
        <div class="form-group">
          <label for="skinNotes">๐ ููุงุญุธุงุช</label>
          <textarea id="skinNotes" rows="3" placeholder="ููุงุญุธุงุช ุนูู ุงูุฌูุณุฉ..."></textarea>
        </div>
        
        <button type="submit" class="btn btn-success" style="width: 100%;">
          <span>๐พ</span>
          ุญูุธ ุงูุชูุงุตูู
        </button>
      </form>
    </div>
  </div>

  <script src="/doctorspace/doctorappo.js"></script>
</body>
</html>